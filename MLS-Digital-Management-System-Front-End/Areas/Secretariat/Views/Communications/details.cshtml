@{
    ViewData["Title"] = "Communication Message";
    Layout = "~/Areas/Finance/Views/shared/_Layout.cshtml";
}

<div class="container py-4">
    <div class="card mx-auto" style="border: none; border-radius: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <div class="card-body">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="d-flex align-items-center" style="gap: 1rem;">
                    <div class="p-3">
                        <i class="bi bi-bell fs-5 text-primary"></i>
                    </div>
                    <div>
                        <h5 class="mb-1">@ViewBag.Training.Subject</h5>
                        <div>
                            <p><strong>To:</strong></p>

                            <!-- Display Roles -->
                            <p>
                                <strong>Roles:</strong>
                                @if (ViewBag.Training.TargetedRoles != null && ViewBag.Training.TargetedRoles.Count > 0)
                                {
                                    foreach (var role in ViewBag.Training.TargetedRoles)
                                    {
                                        @role
                                        if (role!=ViewBag.Training.TargetedRoles[ViewBag.Training.TargetedRoles.Count-1])
                                        {
                                            <span>,</span>
                                        }
                                    }
                                }
                                else
                                {
                                    <span>No roles specified.</span>
                                }
                            </p>

                            <!-- Display Departments -->
                            <p>
                                <strong>Departments:</strong>
                                @if (ViewBag.Training.TargetedDepartments != null && ViewBag.Training.TargetedDepartments.Count > 0)
                                {
                                    foreach (var department in ViewBag.Training.TargetedDepartments)
                                    {
                                        @department
                                        if (department != ViewBag.Training.TargetedDepartments[ViewBag.Training.TargetedDepartments.Count - 1])
                                        {
                                            <span>,</span>
                                        }
                                    }
                                }
                                else
                                {
                                    <span>No departments specified.</span>
                                }
                            </p>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Subject and Body -->
            <div class="col-md-12">
                <div class="mb-3 p-4 bg-light">
                    <label class="fw-bold mb-3">Message</label>
                    <p class="mb-0">@Html.Raw(ViewBag.Training.Body)</p>
                </div>
            </div>
        </div>
    </div>
</div>